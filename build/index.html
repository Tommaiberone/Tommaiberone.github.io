<!doctype html><html><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Ethical Dilemma Generator</title><script src="https://unpkg.com/react@17/umd/react.development.js"></script><script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script><script src="https://unpkg.com/@babel/standalone/babel.min.js"></script><link rel="stylesheet" href="./styles.css"><script defer="defer" src="/static/js/main.91fe9252.js"></script><link href="/static/css/main.c2ed8a31.css" rel="stylesheet"></head><body><div id="root"></div><script type="text/babel">function App() {
      const [loading, setLoading] = React.useState(false);
      const [generatedText, setGeneratedText] = React.useState("");

      const handleClick = async () => {
      setLoading(true);
      setGeneratedText(""); // Clear previous text

      const backendUrl = "https://tommaiberone.pythonanywhere.com/generate-dilemma";

      const payload = {
        model: "llama3-8b-8192",
        messages: [
          {
            role: "user",
            content: `Provide a single, concise ethical dilemma conversation starter.\
            Limit the response to 100 words or less, ensuring clarity and focus. \
            No introduction needed, just the dilemma. Close with an explicit question.`,
          },
        ],
      };

      try {
        const response = await fetch(backendUrl, {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify(payload),
        });

        console.log(response)

        if (!response.ok) {
          throw new Error(`HTTP error! status: ${response.status}`);
        }

        const result = await response.json();
        const content = result.choices[0].message.content;
        setGeneratedText(content.trim());
      } catch (error) {
        console.error("Error during backend call:", error);
        setGeneratedText("Failed to fetch the generated text. Try again.");
      } finally {
        setLoading(false);
      }
    };

      return (
        <div className="container">
          <h1 style={{ marginBottom: "20px", color: "#24292e" }}>Ethical Dilemma Generator</h1>
          <button onClick={handleClick} disabled={loading}>
            {loading ? "Loading..." : "Generate"}
          </button>
          {generatedText && (
            <div className="generated-text">
              <strong>Generated Ethical Dilemma:</strong>
              <p>{generatedText}</p>
            </div>
          )}
        </div>
      );
    }

    ReactDOM.render(<App />, document.getElementById('root'));</script></body></html>